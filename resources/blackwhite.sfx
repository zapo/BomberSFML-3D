texture framebuffer
vec3 color

effect
{
    // On récupère la valeur du pixel courant de l'écran
    vec4 pixel = framebuffer(_in);

    // On calcule son niveau de gris
    float gray = pixel.r * 0.39 + pixel.g * 0.50 + pixel.b * 0.11;

    // On écrit enfin le pixel final, en utilisant 50% du pixel de l'écran et 50% de sa version colorée

    _out = vec4(gray * color, 1.0) * 0.5 + pixel * 0.5;
}